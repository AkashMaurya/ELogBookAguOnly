{% load static %}
<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en" class="{% if request.session.theme == 'dark' %}dark{% endif %}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>
      {% block title %}

      {% endblock %}
    </title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
    <script>
      // Function to set the theme based on session or localStorage
      function setTheme() {
        const theme = localStorage.getItem('theme') || '{% if request.session.theme %}{{ request.session.theme }}{% else %}light{% endif %}'
        if (theme === 'dark') {
          document.documentElement.classList.add('dark')
        } else {
          document.documentElement.classList.remove('dark')
        }
      }
      
      // Set the theme on page load
      setTheme()
    </script>
  
  </head>
  <body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white">
    {% block navbar %}

    {% endblock %}
    {% block content %}

    {% endblock %}

    {% include './components/footer.html' %}
    <!-- JavaScript for Dark Mode Toggle -->
    <script>
      const themeToggleBtn = document.getElementById('theme-toggle')
      const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon')
      const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon')
      
      themeToggleBtn.addEventListener('click', () => {
        // Toggle icons
        themeToggleDarkIcon.classList.toggle('hidden')
        themeToggleLightIcon.classList.toggle('hidden')
      
        // Toggle theme
        const isDarkMode = document.documentElement.classList.toggle('dark')
        localStorage.setItem('theme', isDarkMode ? 'dark' : 'light')
      
        // Send theme preference to the server (optional)
        fetch('/set-theme/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}'
          },
          body: JSON.stringify({ theme: isDarkMode ? 'dark' : 'light' })
        })
      })
    </script>

   
  </body>
</html>
